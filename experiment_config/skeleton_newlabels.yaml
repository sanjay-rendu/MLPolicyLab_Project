experiment_name: skeleton2
owner: bills3_group

inputs:
  sql_loc_bill: "/data/groups/bills3/mlpp_project_home/experiment_config/latestLabels.sql"

outputs:
  baseline_metrics: "/data/groups/bills3/vrenduch/DAGGIT_HOME/daggit_storage/skeleton2/baseline/baseline_metrics.txt"

graph:
  - node_name: fetch_labeled_data
    inputs: sql_loc_bill
    outputs: bill_data
    operation: data_io.fetch_sql

  - node_name: split
    inputs: fetch_labeled_data.bill_data
    outputs: [train, val]
    operation: split.timeSplit
    arguments:
      prediction_date: '2019-06-30'

  - node_name: baseline
    inputs: split.val
    outputs: baseline_metrics
    operation: evaluate.baseline

  - node_name: select
    inputs: [split.train, split.val]
    outputs: [fil_train, fil_val]
    operation: data_clean.feature_selector
    arguments:
      selected_features: ['days_to_final', 'days_from_introduction',
                          'number_dems', 'number_republicans', 'is_bipartisan', 'label']

  - node_name: model_logistic_regression
    inputs: select.fil_train
    outputs: model
    operation: model.logistic_regression_trainer
    arguments:
      target: label
      max_iter: 200